# 이동 평균(Moving average)
- 어떤 것이 방향성을 가지고 움직일 때, 이동하면서 구해지는 평균

## 1. 단순 이동 평균(Simple Moving Average, SMA
- 며칠을 기준으로 할 것인지 정해주어야 함(Window size)
- n 번째 데이터의 단순이동평균 = n 번째 데이터를 포함한 왼쪽 m개 데이터의 산술평균
- U = [4, 1, 1, 2, 4, 11, 0, 0, 4, 2, 8], m(window size) = 6
- n = 1일 경우, 1 번째 데이터의 이동 평균 = 1 번째 데이터를 포함한 왼쪽의 6개 데이터의 산출 평균
- 하지만 n = 1 일 경우 m=6이므로 구할 수 없음
- n=6 -> (4+1+1+2+4+11)/6
- n=7 -> (1+1+2+4+11+0/6
- SMA = (이전의 이동평균 + 들어온 가장 최신 값 - 나간 가장 오래된 값)/m
- 이동 평균은 window size에 영향을 받음

## 2. 누적 이동 평균(Cumulative Moving Average, CMA)
- Window 값을 정하지 않음
- 모든 데이터를 고려하고 싶을 때 사용
- 새로운 값이 들어올 때마다 전체 평균을 새롭게 구하는 것
- n 번째 데이터의 누적이동평균 = n 번째 데이터를 포함한, 이전 모든 데이터의 평균
- n=1->4
- n=2->(4+1)/2
- 마지막 데이터의 누적이동평균은 결국 전체 데이터의 평균
- n+1 번째 누적이동평균 = (n 번째 누적이동평균 x n + 새로 들어온 값)/(n+1)
- 이전의 모든 데이터를 포함.
- 최신 정보를 반영 못함

## 3. (선형)가중이동평균(Weighted Moving Average, WMA)
- 데이터의 위치에 따라 서로 다른 가중치를 부여한 후 이동평균 계산
- Window size 지정
- n 번째 데이터의 선형가중이동평균 = A/B
- A = dot product([m,m-1,m-2,...1], [n 번째 데이터, n-1 번째 데이터,...,n-m+1 번째 데이터)
- B = m + (m-1) + ... + 1
- 오래된 데이터로 갈 수록 곱해지는 값이 선형적으로 감소
- 수학적으로 식을 변형하면, 매번 전체를 계산하지 않고 구할 수 있음
- 목적에 맞추어 비선형 방식으로 곱할 수도 있음

## 4. 지수 이동 평균(Exponentially Moving Average, EMA)
- 가장 최근 데이터 포인트에 더 큰 가중치와 중요성을 부여하는 이동 평균
- SMA보다 한 번 더 관찰
- m = 20
- SMA를 계산할려면 20 번쨰까지 기다려야 함
- 21 번째 전날의 SMA를 어제의 첫 번째 EMA
- EMA(i) = k * price(i) + (1-k) * EMA(i-1)
- k = 2/(N+1), N : 이동평균의 탭 수
